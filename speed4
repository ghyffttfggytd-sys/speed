-- üî• ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡πÇ‡∏ï‡πâ‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤ + ‡∏°‡∏≠‡∏á‡∏ó‡∏∞‡∏•‡∏∏ + ‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏ß + ‡πÄ‡∏°‡∏ô‡∏π‡∏•‡∏≤‡∏Å‡πÑ‡∏î‡πâ
-- (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÄ‡∏Å‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
-- by ChatGPT

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local camera = workspace.CurrentCamera

local speed = 16
local locked = false
local target = nil
local autoLock = true
local highlightList = {}
local maxDistance = 150

-- üß± GUI
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.ResetOnSpawn = false

-- ‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å
local menuFrame = Instance.new("Frame")
menuFrame.Parent = gui
menuFrame.Size = UDim2.new(0, 220, 0, 230)
menuFrame.Position = UDim2.new(0.05, 0, 0.65, 0)
menuFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
menuFrame.Active = true -- ‚úÖ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏•‡∏≤‡∏Å‡πÑ‡∏î‡πâ
menuFrame.Draggable = true
menuFrame.Visible = true
menuFrame.BorderSizePixel = 2
menuFrame.BorderColor3 = Color3.fromRGB(255, 0, 0)

local title = Instance.new("TextLabel", menuFrame)
title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "‚öôÔ∏è ‡πÄ‡∏°‡∏ô‡∏π‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°"
title.TextScaled = true
title.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
title.TextColor3 = Color3.new(1, 1, 1)

-- üîò ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏£‡∏∞‡∏ö‡∏ö
local lockButton = Instance.new("TextButton", menuFrame)
lockButton.Size = UDim2.new(1, -20, 0, 40)
lockButton.Position = UDim2.new(0, 10, 0, 40)
lockButton.Text = "üîí ‡∏≠‡∏≠‡πÇ‡∏ï‡πâ‡∏•‡πá‡∏≠‡∏Å: ‡πÄ‡∏õ‡∏¥‡∏î"
lockButton.TextScaled = true
lockButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
lockButton.TextColor3 = Color3.new(1, 1, 1)

-- ‚ö° ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß
local speedLabel = Instance.new("TextLabel", menuFrame)
speedLabel.Size = UDim2.new(1, -20, 0, 30)
speedLabel.Position = UDim2.new(0, 10, 0, 90)
speedLabel.Text = "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: " .. speed
speedLabel.TextScaled = true
speedLabel.BackgroundTransparency = 1
speedLabel.TextColor3 = Color3.new(1, 1, 1)

local plusButton = Instance.new("TextButton", menuFrame)
plusButton.Size = UDim2.new(0.45, -10, 0, 40)
plusButton.Position = UDim2.new(0.05, 0, 0, 130)
plusButton.Text = "+"
plusButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)

local minusButton = Instance.new("TextButton", menuFrame)
minusButton.Size = UDim2.new(0.45, -10, 0, 40)
minusButton.Position = UDim2.new(0.5, 10, 0, 130)
minusButton.Text = "-"
minusButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)

-- üëÅÔ∏è ‡∏°‡∏≠‡∏á‡∏ó‡∏∞‡∏•‡∏∏ (Highlight)
local espButton = Instance.new("TextButton", menuFrame)
espButton.Size = UDim2.new(1, -20, 0, 40)
espButton.Position = UDim2.new(0, 10, 0, 180)
espButton.Text = "üëÅÔ∏è ‡∏°‡∏≠‡∏á‡∏ó‡∏∞‡∏•‡∏∏: ‡πÄ‡∏õ‡∏¥‡∏î"
espButton.TextScaled = true
espButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
espButton.TextColor3 = Color3.new(1, 1, 1)

local espEnabled = true

-- üéØ ‡∏´‡∏≤‡∏®‡∏±‡∏ï‡∏£‡∏π‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô
local function getClosestEnemy()
	local char = player.Character
	if not char or not char:FindFirstChild("HumanoidRootPart") then return nil end
	local root = char.HumanoidRootPart

	local nearest = nil
	local nearestDist = math.huge

	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local enemyRoot = plr.Character.HumanoidRootPart
			local dist = (enemyRoot.Position - root.Position).Magnitude
			if dist < maxDistance then
				local rayParams = RaycastParams.new()
				rayParams.FilterDescendantsInstances = {char}
				rayParams.FilterType = Enum.RaycastFilterType.Blacklist
				local result = workspace:Raycast(root.Position, (enemyRoot.Position - root.Position).Unit * dist, rayParams)
				if result and result.Instance:IsDescendantOf(plr.Character) then
					if dist < nearestDist then
						nearest = plr
						nearestDist = dist
					end
				end
			end
		end
	end
	return nearest
end

-- üëÅÔ∏è ‡∏™‡∏£‡πâ‡∏≤‡∏á Highlight (‡∏°‡∏≠‡∏á‡∏ó‡∏∞‡∏•‡∏∏)
local function createHighlight(character)
	if highlightList[character] then return end
	local hl = Instance.new("Highlight")
	hl.Parent = character
	hl.FillColor = Color3.fromRGB(255, 0, 0)
	hl.OutlineColor = Color3.new(1, 1, 1)
	highlightList[character] = hl
end

-- üßΩ ‡∏•‡πâ‡∏≤‡∏á highlight
local function clearHighlights()
	for char, hl in pairs(highlightList) do
		if hl and hl.Parent then
			hl:Destroy()
		end
	end
	highlightList = {}
end

-- üîÑ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏∏‡∏Å‡πÄ‡∏ü‡∏£‡∏°
RunService.RenderStepped:Connect(function()
	local char = player.Character
	if char and char:FindFirstChild("Humanoid") then
		char.Humanoid.WalkSpeed = speed
	end

	-- Auto Lock ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á
	if autoLock then
		if not target or not target.Character or not target.Character:FindFirstChild("Humanoid") or target.Character.Humanoid.Health <= 0 then
			target = getClosestEnemy()
		end
		if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
			camera.CFrame = CFrame.new(camera.CFrame.Position, target.Character.HumanoidRootPart.Position)
		end
	end

	-- ESP
	if espEnabled then
		for _, plr in pairs(Players:GetPlayers()) do
			if plr ~= player and plr.Character then
				createHighlight(plr.Character)
			end
		end
	else
		clearHighlights()
	end
end)

-- üñ±Ô∏è ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°
lockButton.MouseButton1Click:Connect(function()
	autoLock = not autoLock
	if autoLock then
		lockButton.Text = "üîí ‡∏≠‡∏≠‡πÇ‡∏ï‡πâ‡∏•‡πá‡∏≠‡∏Å: ‡πÄ‡∏õ‡∏¥‡∏î"
		lockButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
	else
		lockButton.Text = "üîí ‡∏≠‡∏≠‡πÇ‡∏ï‡πâ‡∏•‡πá‡∏≠‡∏Å: ‡∏õ‡∏¥‡∏î"
		lockButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
	end
end)

plusButton.MouseButton1Click:Connect(function()
	speed = math.clamp(speed + 5, 16, 200)
	speedLabel.Text = "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: " .. speed
end)

minusButton.MouseButton1Click:Connect(function()
	speed = math.clamp(speed - 5, 16, 200)
	speedLabel.Text = "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: " .. speed
end)

espButton.MouseButton1Click:Connect(function()
	espEnabled = not espEnabled
	if espEnabled then
		espButton.Text = "üëÅÔ∏è ‡∏°‡∏≠‡∏á‡∏ó‡∏∞‡∏•‡∏∏: ‡πÄ‡∏õ‡∏¥‡∏î"
		espButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
	else
		espButton.Text = "üëÅÔ∏è ‡∏°‡∏≠‡∏á‡∏ó‡∏∞‡∏•‡∏∏: ‡∏õ‡∏¥‡∏î"
		espButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
		clearHighlights()
	end
end)
